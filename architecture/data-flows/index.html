
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Azure-powered real-time voice agent with text-to-speech and speech recognition capabilities" name="description"/>
<link href="../acs-flows/" rel="prev"/>
<link href="../speech-recognition/" rel="next"/>
<link href="../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.6.23" name="generator"/>
<title>Data Flows - Real-Time Voice Agent Documentation</title>
<link href="../../assets/stylesheets/main.84d31ad4.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../assets/_mkdocstrings.css" rel="stylesheet"/>
<link href="../../assets/oad-styles.css" rel="stylesheet"/>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="light-blue" data-md-color-primary="blue" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#data-architecture-flow-patterns">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Real-Time Voice Agent Documentation" class="md-header__button md-logo" data-md-component="logo" href="../.." title="Real-Time Voice Agent Documentation">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Real-Time Voice Agent Documentation
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Data Flows
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="light-blue" data-md-color-media="" data-md-color-primary="blue" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="light-blue" data-md-color-media="" data-md-color-primary="blue" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<a aria-label="Share" class="md-search__icon md-icon" data-clipboard="" data-clipboard-text="" data-md-component="search-share" href="javascript:void(0)" tabindex="-1" title="Share">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg>
</a>
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/Azure-Samples/art-voice-agent-accelerator/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</div>
<div class="md-source__repository">
    Azure-Samples/art-voice-agent-accelerator
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../..">
        
  
  
    
  
  Home

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../getting-started/">
          
  
  
  Getting Started

        </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="../">
          
  
  
  Architecture

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../deployment/">
          
  
  
  Deployment

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../security/authentication/">
          
  
  
  Security

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../operations/monitoring/">
          
  
  
  Operations

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../api/">
          
  
  
  API Reference

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../industry/healthcare/">
          
  
  
  Industry Solutions

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../samples/">
          
  
  
  Samples &amp; Labs

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../guides/repository-structure/">
          
  
  
  Guides

        </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Real-Time Voice Agent Documentation" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="Real-Time Voice Agent Documentation">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
    Real-Time Voice Agent Documentation
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/Azure-Samples/art-voice-agent-accelerator/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</div>
<div class="md-source__repository">
    Azure-Samples/art-voice-agent-accelerator
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
<span class="md-ellipsis">
    Home
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    Getting Started
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../getting-started/">
<span class="md-ellipsis">
    Quick Start Guide
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../getting-started/local-development/">
<span class="md-ellipsis">
    Local Development
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../getting-started/configuration/">
<span class="md-ellipsis">
    Configuration Guide
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
<span class="md-ellipsis">
    Architecture
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            Architecture
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../">
<span class="md-ellipsis">
    Overview
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../llm-orchestration/">
<span class="md-ellipsis">
    LLM Orchestration
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../acs-flows/">
<span class="md-ellipsis">
    ACS Flows
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Data Flows
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    Data Flows
    
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#data-architecture-flow-patterns">
<span class="md-ellipsis">
      Data Architecture &amp; Flow Patterns
    </span>
</a>
<nav aria-label="Data Architecture &amp; Flow Patterns" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#architecture-overview">
<span class="md-ellipsis">
      Architecture Overview
    </span>
</a>
<nav aria-label="Architecture Overview" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#storage-hierarchy">
<span class="md-ellipsis">
      Storage Hierarchy
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#storage-decision-matrix">
<span class="md-ellipsis">
      Storage Decision Matrix
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#storage-layer-characteristics">
<span class="md-ellipsis">
      Storage Layer Characteristics
    </span>
</a>
<nav aria-label="Storage Layer Characteristics" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#application-memory-milliseconds">
<span class="md-ellipsis">
      üî• Application Memory (Milliseconds)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#redis-enterprise-sub-second">
<span class="md-ellipsis">
      ‚ö° Redis Enterprise (Sub-second)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cosmos-db-permanent">
<span class="md-ellipsis">
      üíæ Cosmos DB (Permanent)
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#redis-key-architecture">
<span class="md-ellipsis">
      Redis Key Architecture
    </span>
</a>
<nav aria-label="Redis Key Architecture" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#hierarchical-key-structure">
<span class="md-ellipsis">
      Hierarchical Key Structure
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ttl-management-strategy">
<span class="md-ellipsis">
      TTL Management Strategy
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#implementation-patterns">
<span class="md-ellipsis">
      Implementation Patterns
    </span>
</a>
<nav aria-label="Implementation Patterns" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#core-components">
<span class="md-ellipsis">
      Core Components
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#usage-examples">
<span class="md-ellipsis">
      Usage Examples
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#complete-call-lifecycle-flow">
<span class="md-ellipsis">
      Complete Call Lifecycle Flow
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#best-practices-configuration">
<span class="md-ellipsis">
      Best Practices &amp; Configuration
    </span>
</a>
<nav aria-label="Best Practices &amp; Configuration" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#key-design-principles">
<span class="md-ellipsis">
      Key Design Principles
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#monitoring-production-readiness">
<span class="md-ellipsis">
      Monitoring &amp; Production Readiness
    </span>
</a>
<nav aria-label="Monitoring &amp; Production Readiness" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#key-performance-metrics-baselines">
<span class="md-ellipsis">
      Key Performance Metrics &amp; Baselines
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#production-alerting-strategy">
<span class="md-ellipsis">
      Production Alerting Strategy
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#alert-configuration-details">
<span class="md-ellipsis">
      Alert Configuration Details
    </span>
</a>
<nav aria-label="Alert Configuration Details" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#security-compliance-framework">
<span class="md-ellipsis">
      Security &amp; Compliance Framework
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#operational-runbooks">
<span class="md-ellipsis">
      Operational Runbooks
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#capacity-planning">
<span class="md-ellipsis">
      Capacity Planning
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#health-check-implementation">
<span class="md-ellipsis">
      Health Check Implementation
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../speech-recognition/">
<span class="md-ellipsis">
    Speech Recognition
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../speech-synthesis/">
<span class="md-ellipsis">
    Speech Synthesis
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../streaming-modes/">
<span class="md-ellipsis">
    Streaming Modes
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../integrations/">
<span class="md-ellipsis">
    Integrations
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    Deployment
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            Deployment
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../deployment/">
<span class="md-ellipsis">
    Deployment Guide
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../deployment/production/">
<span class="md-ellipsis">
    Production
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../deployment/cicd/">
<span class="md-ellipsis">
    CI/CD
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-ellipsis">
    Security
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            Security
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../security/authentication/">
<span class="md-ellipsis">
    Authentication
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
<span class="md-ellipsis">
    Operations
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            Operations
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../operations/monitoring/">
<span class="md-ellipsis">
    Monitoring
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operations/troubleshooting/">
<span class="md-ellipsis">
    Troubleshooting
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operations/testing/">
<span class="md-ellipsis">
    Testing
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../operations/load-testing/">
<span class="md-ellipsis">
    Load Testing
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
<span class="md-ellipsis">
    API Reference
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/">
<span class="md-ellipsis">
    Overview
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/api-reference/">
<span class="md-ellipsis">
    API Reference
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
<span class="md-ellipsis">
    Industry Solutions
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            Industry Solutions
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../industry/healthcare/">
<span class="md-ellipsis">
    Healthcare
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
<span class="md-ellipsis">
    Samples &amp; Labs
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_9_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_9">
<span class="md-nav__icon md-icon"></span>
            Samples &amp; Labs
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../samples/">
<span class="md-ellipsis">
    Overview
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
<span class="md-ellipsis">
    Guides
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_10_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_10">
<span class="md-nav__icon md-icon"></span>
            Guides
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../guides/repository-structure/">
<span class="md-ellipsis">
    Repository Structure
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../guides/utilities/">
<span class="md-ellipsis">
    Utilities &amp; Services
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#data-architecture-flow-patterns">
<span class="md-ellipsis">
      Data Architecture &amp; Flow Patterns
    </span>
</a>
<nav aria-label="Data Architecture &amp; Flow Patterns" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#architecture-overview">
<span class="md-ellipsis">
      Architecture Overview
    </span>
</a>
<nav aria-label="Architecture Overview" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#storage-hierarchy">
<span class="md-ellipsis">
      Storage Hierarchy
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#storage-decision-matrix">
<span class="md-ellipsis">
      Storage Decision Matrix
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#storage-layer-characteristics">
<span class="md-ellipsis">
      Storage Layer Characteristics
    </span>
</a>
<nav aria-label="Storage Layer Characteristics" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#application-memory-milliseconds">
<span class="md-ellipsis">
      üî• Application Memory (Milliseconds)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#redis-enterprise-sub-second">
<span class="md-ellipsis">
      ‚ö° Redis Enterprise (Sub-second)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cosmos-db-permanent">
<span class="md-ellipsis">
      üíæ Cosmos DB (Permanent)
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#redis-key-architecture">
<span class="md-ellipsis">
      Redis Key Architecture
    </span>
</a>
<nav aria-label="Redis Key Architecture" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#hierarchical-key-structure">
<span class="md-ellipsis">
      Hierarchical Key Structure
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ttl-management-strategy">
<span class="md-ellipsis">
      TTL Management Strategy
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#implementation-patterns">
<span class="md-ellipsis">
      Implementation Patterns
    </span>
</a>
<nav aria-label="Implementation Patterns" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#core-components">
<span class="md-ellipsis">
      Core Components
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#usage-examples">
<span class="md-ellipsis">
      Usage Examples
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#complete-call-lifecycle-flow">
<span class="md-ellipsis">
      Complete Call Lifecycle Flow
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#best-practices-configuration">
<span class="md-ellipsis">
      Best Practices &amp; Configuration
    </span>
</a>
<nav aria-label="Best Practices &amp; Configuration" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#key-design-principles">
<span class="md-ellipsis">
      Key Design Principles
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#monitoring-production-readiness">
<span class="md-ellipsis">
      Monitoring &amp; Production Readiness
    </span>
</a>
<nav aria-label="Monitoring &amp; Production Readiness" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#key-performance-metrics-baselines">
<span class="md-ellipsis">
      Key Performance Metrics &amp; Baselines
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#production-alerting-strategy">
<span class="md-ellipsis">
      Production Alerting Strategy
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#alert-configuration-details">
<span class="md-ellipsis">
      Alert Configuration Details
    </span>
</a>
<nav aria-label="Alert Configuration Details" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#security-compliance-framework">
<span class="md-ellipsis">
      Security &amp; Compliance Framework
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#operational-runbooks">
<span class="md-ellipsis">
      Operational Runbooks
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#capacity-planning">
<span class="md-ellipsis">
      Capacity Planning
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#health-check-implementation">
<span class="md-ellipsis">
      Health Check Implementation
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1>Data Flows</h1>
<h2 id="data-architecture-flow-patterns"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 3C7.58 3 4 4.79 4 7v10c0 2.21 3.59 4 8 4s8-1.79 8-4V7c0-2.21-3.58-4-8-4m6 14c0 .5-2.13 2-6 2s-6-1.5-6-2v-2.23c1.61.78 3.72 1.23 6 1.23s4.39-.45 6-1.23zm0-4.55c-1.3.95-3.58 1.55-6 1.55s-4.7-.6-6-1.55V9.64c1.47.83 3.61 1.36 6 1.36s4.53-.53 6-1.36zM12 9C8.13 9 6 7.5 6 7s2.13-2 6-2 6 1.5 6 2-2.13 2-6 2"></path></svg></span> Data Architecture &amp; Flow Patterns<a class="headerlink" href="#data-architecture-flow-patterns" title="Permanent link">¬∂</a></h2>
<div class="admonition abstract">
<p class="admonition-title">Three-Tier Data Architecture</p>
<p>Sophisticated data architecture optimized for <strong>real-time voice processing at scale</strong> with hierarchical key organization, intelligent caching, and seamless data persistence for Azure Communication Services calls.</p>
</div>
<h3 id="architecture-overview"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m3 14 .5.07L8.07 9.5a1.95 1.95 0 0 1 .52-1.91c.78-.79 2.04-.79 2.82 0 .53.52.7 1.26.52 1.91l2.57 2.57.5-.07c.18 0 .35 0 .5.07l3.57-3.57C19 8.35 19 8.18 19 8a2 2 0 0 1 2-2 2 2 0 0 1 2 2 2 2 0 0 1-2 2c-.18 0-.35 0-.5-.07l-3.57 3.57c.07.15.07.32.07.5a2 2 0 0 1-2 2 2 2 0 0 1-2-2l.07-.5-2.57-2.57c-.32.07-.68.07-1 0L4.93 15.5 5 16a2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2"></path></svg></span> Architecture Overview<a class="headerlink" href="#architecture-overview" title="Permanent link">¬∂</a></h3>
<div class="admonition success">
<p class="admonition-title">Performance-Optimized Storage Strategy</p>
<p>The system employs a strategic <strong>three-tier data storage hierarchy</strong> optimized for different access patterns and performance requirements.</p>
</div>
<h4 id="storage-hierarchy"><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m12 16 7.36-5.73L21 9l-9-7-9 7 1.63 1.27M12 18.54l-7.38-5.73L3 14.07l9 7 9-7-1.63-1.27z"></path></svg></span> Storage Hierarchy<a class="headerlink" href="#storage-hierarchy" title="Permanent link">¬∂</a></h4>
<table>
<thead>
<tr>
<th><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 16a3 3 0 0 1-3-3c0-1.12.61-2.1 1.5-2.61l9.71-5.62-5.53 9.58c-.5.98-1.51 1.65-2.68 1.65m0-13c1.81 0 3.5.5 4.97 1.32l-2.1 1.21C14 5.19 13 5 12 5a8 8 0 0 0-8 8c0 2.21.89 4.21 2.34 5.65h.01c.39.39.39 1.02 0 1.41s-1.03.39-1.42.01A9.97 9.97 0 0 1 2 13 10 10 0 0 1 12 3m10 10c0 2.76-1.12 5.26-2.93 7.07-.39.38-1.02.38-1.41-.01a.996.996 0 0 1 0-1.41A7.95 7.95 0 0 0 20 13c0-1-.19-2-.54-2.9L20.67 8C21.5 9.5 22 11.18 22 13"></path></svg></span> Tier</th>
<th><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m19.03 7.39 1.42-1.42c-.45-.51-.9-.97-1.41-1.41L17.62 6c-1.55-1.26-3.5-2-5.62-2a9 9 0 0 0 0 18c5 0 9-4.03 9-9 0-2.12-.74-4.07-1.97-5.61M13 14h-2V7h2zm2-13H9v2h6z"></path></svg></span> Access Time</th>
<th><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 3C7.58 3 4 4.79 4 7s3.58 4 8 4 8-1.79 8-4-3.58-4-8-4M4 9v3c0 2.21 3.58 4 8 4s8-1.79 8-4V9c0 2.21-3.58 4-8 4s-8-1.79-8-4m0 5v3c0 2.21 3.58 4 8 4s8-1.79 8-4v-3c0 2.21-3.58 4-8 4s-8-1.79-8-4"></path></svg></span> Use Cases</th>
<th><span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m16 11.78 4.24-7.33 1.73 1-5.23 9.05-6.51-3.75L5.46 19H22v2H2V3h2v14.54L9.5 8z"></path></svg></span> Capacity</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>üî• Application Memory</strong></td>
<td>Microseconds</td>
<td>Active call state, audio buffers, real-time metrics</td>
<td>Limited by RAM</td>
</tr>
<tr>
<td><strong>‚ö° Redis Enterprise</strong></td>
<td>Sub-second</td>
<td>Conversation context, session history, worker affinity</td>
<td>10GB - 1TB</td>
</tr>
<tr>
<td><strong>üìö Cosmos DB</strong></td>
<td>1-5 seconds</td>
<td>Persistent conversations, analytics, audit logs</td>
<td>Unlimited</td>
</tr>
</tbody>
</table>
<div class="admonition info">
<p class="admonition-title">Microsoft Learn Resources</p>
<ul>
<li><strong><a href="https://learn.microsoft.com/en-us/azure/azure-cache-for-redis/cache-overview">Azure Cache for Redis Overview</a></strong> - High-performance in-memory data store</li>
<li><strong><a href="https://learn.microsoft.com/en-us/azure/cosmos-db/use-cases">Azure Cosmos DB Use Cases</a></strong> - NoSQL database for modern applications</li>
<li><strong><a href="https://learn.microsoft.com/en-us/azure/azure-cache-for-redis/cache-overview#key-scenarios">Azure Redis Key Scenarios</a></strong> - Session store and caching patterns</li>
</ul>
</div>
<div class="mermaid">flowchart TD
    subgraph Memory ["üî• Application Memory (ms access)"]
        A["Active Call State"]
        B["Audio Buffers"]
        C["Real-time Metrics"]
        D["Connection Pools"]
        E["Cached Prompts"]
    end

    subgraph Redis ["‚ö° Redis Enterprise (sub-second access)"]
        F["Conversation Context"]
        G["Session History"]
        H["Worker Affinity"]
        I["Authentication State"]
        J["TTS Cache"]
    end

    subgraph Cosmos ["üíæ Cosmos DB (permanent storage)"]
        K["Call Transcripts"]
        L["User Profiles"]
        M["Analytics Data"]
        N["Audit Logs"]
        O["System Metrics"]
    end

    A --&gt; F
    B --&gt; F
    F --&gt; K
    G --&gt; L
    I --&gt; L

    classDef memoryNode fill:#FF5722,stroke:#D84315,stroke-width:2px,color:#fff
    classDef redisNode fill:#FF9800,stroke:#F57C00,stroke-width:2px,color:#fff
    classDef cosmosNode fill:#4CAF50,stroke:#388E3C,stroke-width:2px,color:#fff

    class A,B,C,D,E memoryNode
    class F,G,H,I,J redisNode
    class K,L,M,N,O cosmosNode
</div>
<h4 id="storage-decision-matrix">Storage Decision Matrix<a class="headerlink" href="#storage-decision-matrix" title="Permanent link">¬∂</a></h4>
<table>
<thead>
<tr>
<th>Data Type</th>
<th>Memory</th>
<th>Redis</th>
<th>Cosmos</th>
<th>Access Pattern</th>
<th>Reasoning</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>WebSocket Connections</strong></td>
<td>‚úÖ</td>
<td>‚ùå</td>
<td>‚ùå</td>
<td>High throughput</td>
<td>Process-specific, ultra-low latency</td>
</tr>
<tr>
<td><strong>Audio Buffers</strong></td>
<td>‚úÖ</td>
<td>‚ùå</td>
<td>‚ùå</td>
<td>Real-time</td>
<td>High-frequency, temporary</td>
</tr>
<tr>
<td><strong>Conversation Context</strong></td>
<td>‚ùå</td>
<td>‚úÖ</td>
<td>‚ùå</td>
<td>10-50 ops/sec</td>
<td>Session persistence, shared workers</td>
</tr>
<tr>
<td><strong>TTS Cache</strong></td>
<td>‚ùå</td>
<td>‚úÖ</td>
<td>‚ùå</td>
<td>Variable</td>
<td>Shared across calls, time-limited</td>
</tr>
<tr>
<td><strong>Call Transcripts</strong></td>
<td>‚ùå</td>
<td>‚ùå</td>
<td>‚úÖ</td>
<td>1-10 ops/min</td>
<td>Permanent record, analytics</td>
</tr>
<tr>
<td><strong>User Profiles</strong></td>
<td>‚ùå</td>
<td>üîÑ</td>
<td>‚úÖ</td>
<td>Low frequency</td>
<td>Long-term, complex queries</td>
</tr>
</tbody>
</table>
<p><strong>Legend</strong>: ‚úÖ Primary storage, üîÑ Cached copy, ‚ùå Not stored</p>
<h4 id="storage-layer-characteristics">Storage Layer Characteristics<a class="headerlink" href="#storage-layer-characteristics" title="Permanent link">¬∂</a></h4>
<h5 id="application-memory-milliseconds">üî• Application Memory (Milliseconds)<a class="headerlink" href="#application-memory-milliseconds" title="Permanent link">¬∂</a></h5>
<ul>
<li><strong>Purpose</strong>: Ultra-low latency data for active calls</li>
<li><strong>Examples</strong>: Audio buffers, WebSocket connections, real-time metrics</li>
<li><strong>Lifespan</strong>: Seconds to minutes (call duration)</li>
<li><strong>Access</strong>: 100+ ops/second per call</li>
<li><strong>Recovery</strong>: Non-recoverable, rebuilt on restart</li>
</ul>
<h5 id="redis-enterprise-sub-second">‚ö° Redis Enterprise (Sub-second)<a class="headerlink" href="#redis-enterprise-sub-second" title="Permanent link">¬∂</a></h5>
<ul>
<li><strong>Purpose</strong>: Session-scoped data shared across workers</li>
<li><strong>Examples</strong>: Conversation context, authentication state, TTS cache</li>
<li><strong>Lifespan</strong>: Minutes to hours (15min - 7 days TTL)</li>
<li><strong>Access</strong>: 10-50 ops/second per call</li>
<li><strong>Recovery</strong>: Critical, survives restarts</li>
</ul>
<blockquote>
<p><strong>üìö Microsoft Learn Resources:</strong>
- <a href="https://learn.microsoft.com/en-us/azure/well-architected/service-guides/azure-cache-redis/reliability">Azure Cache for Redis Reliability</a> - Best practices for enterprise Redis deployment
- <a href="https://learn.microsoft.com/en-us/azure/azure-cache-for-redis/cache-overview#key-scenarios">Redis Session Store Pattern</a> - Session management and caching strategies</p>
</blockquote>
<h5 id="cosmos-db-permanent">üíæ Cosmos DB (Permanent)<a class="headerlink" href="#cosmos-db-permanent" title="Permanent link">¬∂</a></h5>
<ul>
<li><strong>Purpose</strong>: Long-term storage, analytics, compliance</li>
<li><strong>Examples</strong>: Call transcripts, user profiles, audit logs</li>
<li><strong>Lifespan</strong>: Days to years (policy-driven retention)</li>
<li><strong>Access</strong>: 1-10 ops/minute for active calls</li>
<li><strong>Recovery</strong>: Permanent system of record</li>
</ul>
<blockquote>
<p><strong>üìö Microsoft Learn Resources:</strong>
- <a href="https://learn.microsoft.com/en-us/azure/cosmos-db/distribute-data-globally">Global Data Distribution with Cosmos DB</a> - Multi-region replication and consistency
- <a href="https://learn.microsoft.com/en-us/azure/cosmos-db/nosql/overview">Azure Cosmos DB for NoSQL</a> - Document storage with SQL-like queries</p>
</blockquote>
<h3 id="redis-key-architecture">Redis Key Architecture<a class="headerlink" href="#redis-key-architecture" title="Permanent link">¬∂</a></h3>
<h4 id="hierarchical-key-structure">Hierarchical Key Structure<a class="headerlink" href="#hierarchical-key-structure" title="Permanent link">¬∂</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a>{app_prefix}:{environment}:{data_type}:{identifier}:{component}
</span></code></pre></div>
<p><strong>Examples</strong>:
- <code>rtvoice:prod:call:call-connection-id-1234:session</code>
- <code>rtvoice:prod:conversation:session-id-5678:context</code>
- <code>rtvoice:dev:worker:worker-abc123:affinity</code></p>
<h4 id="ttl-management-strategy">TTL Management Strategy<a class="headerlink" href="#ttl-management-strategy" title="Permanent link">¬∂</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="n">TTL_POLICIES</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-1-2"><a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a>    <span class="s2">"conversation_context"</span><span class="p">:</span> <span class="mi">30</span> <span class="o">*</span> <span class="mi">60</span><span class="p">,</span>      <span class="c1"># 30 minutes</span>
</span><span id="__span-1-3"><a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a>    <span class="s2">"session_history"</span><span class="p">:</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span><span class="p">,</span>       <span class="c1"># 2 hours</span>
</span><span id="__span-1-4"><a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a>    <span class="s2">"authentication_state"</span><span class="p">:</span> <span class="mi">15</span> <span class="o">*</span> <span class="mi">60</span><span class="p">,</span>      <span class="c1"># 15 minutes</span>
</span><span id="__span-1-5"><a href="#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a>    <span class="s2">"tts_cache"</span><span class="p">:</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span><span class="p">,</span>           <span class="c1"># 24 hours</span>
</span><span id="__span-1-6"><a href="#__codelineno-1-6" id="__codelineno-1-6" name="__codelineno-1-6"></a>    <span class="s2">"call_summary"</span><span class="p">:</span> <span class="mi">7</span> <span class="o">*</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span><span class="p">,</span>    <span class="c1"># 7 days (analytics)</span>
</span><span id="__span-1-7"><a href="#__codelineno-1-7" id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="implementation-patterns">Implementation Patterns<a class="headerlink" href="#implementation-patterns" title="Permanent link">¬∂</a></h3>
<h4 id="core-components">Core Components<a class="headerlink" href="#core-components" title="Permanent link">¬∂</a></h4>
<ol>
<li><strong>RedisKeyManager</strong>: Hierarchical key structure and TTL management</li>
<li><strong>AsyncAzureRedisManager</strong>: High-level async operations for conversation and call management  </li>
<li><strong>ConversationManager</strong>: Conversation state with automatic legacy migration</li>
</ol>
<h4 id="usage-examples">Usage Examples<a class="headerlink" href="#usage-examples" title="Permanent link">¬∂</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="c1"># ACS Call Session Setup</span>
</span><span id="__span-2-2"><a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_call_connected</span><span class="p">(</span><span class="n">call_connection_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="__span-2-3"><a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a>    <span class="n">session_key</span> <span class="o">=</span> <span class="n">redis_manager</span><span class="o">.</span><span class="n">key_manager</span><span class="o">.</span><span class="n">call_key</span><span class="p">(</span><span class="n">call_connection_id</span><span class="p">,</span> <span class="n">Component</span><span class="o">.</span><span class="n">SESSION</span><span class="p">)</span>
</span><span id="__span-2-4"><a href="#__codelineno-2-4" id="__codelineno-2-4" name="__codelineno-2-4"></a>    <span class="k">await</span> <span class="n">redis_manager</span><span class="o">.</span><span class="n">store_call_session</span><span class="p">(</span><span class="n">call_connection_id</span><span class="p">,</span> <span class="n">session_data</span><span class="p">)</span>
</span><span id="__span-2-5"><a href="#__codelineno-2-5" id="__codelineno-2-5" name="__codelineno-2-5"></a>
</span><span id="__span-2-6"><a href="#__codelineno-2-6" id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="c1"># Conversation Management with ConversationManager</span>
</span><span id="__span-2-7"><a href="#__codelineno-2-7" id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">setup_conversation</span><span class="p">(</span><span class="n">session_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="__span-2-8"><a href="#__codelineno-2-8" id="__codelineno-2-8" name="__codelineno-2-8"></a>    <span class="n">cm</span> <span class="o">=</span> <span class="n">ConversationManager</span><span class="p">(</span><span class="n">session_id</span><span class="o">=</span><span class="n">session_id</span><span class="p">,</span> <span class="n">environment</span><span class="o">=</span><span class="s2">"prod"</span><span class="p">)</span>
</span><span id="__span-2-9"><a href="#__codelineno-2-9" id="__codelineno-2-9" name="__codelineno-2-9"></a>    <span class="n">cm</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ConversationManager</span><span class="o">.</span><span class="n">from_redis</span><span class="p">(</span><span class="n">session_id</span><span class="p">,</span> <span class="n">redis_mgr</span><span class="p">)</span>
</span><span id="__span-2-10"><a href="#__codelineno-2-10" id="__codelineno-2-10" name="__codelineno-2-10"></a>    <span class="k">await</span> <span class="n">cm</span><span class="o">.</span><span class="n">update_context</span><span class="p">({</span><span class="s2">"user_authenticated"</span><span class="p">:</span> <span class="kc">True</span><span class="p">})</span>
</span><span id="__span-2-11"><a href="#__codelineno-2-11" id="__codelineno-2-11" name="__codelineno-2-11"></a>    <span class="k">await</span> <span class="n">cm</span><span class="o">.</span><span class="n">append_to_history</span><span class="p">(</span><span class="s2">"user"</span><span class="p">,</span> <span class="s2">"Hello"</span><span class="p">)</span>
</span><span id="__span-2-12"><a href="#__codelineno-2-12" id="__codelineno-2-12" name="__codelineno-2-12"></a>
</span><span id="__span-2-13"><a href="#__codelineno-2-13" id="__codelineno-2-13" name="__codelineno-2-13"></a><span class="c1"># TTS Caching</span>
</span><span id="__span-2-14"><a href="#__codelineno-2-14" id="__codelineno-2-14" name="__codelineno-2-14"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">cache_tts_response</span><span class="p">(</span><span class="n">phrase_hash</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">audio_data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
</span><span id="__span-2-15"><a href="#__codelineno-2-15" id="__codelineno-2-15" name="__codelineno-2-15"></a>    <span class="n">key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"rtvoice:prod:cache:tts:</span><span class="si">{</span><span class="n">phrase_hash</span><span class="si">}</span><span class="s2">"</span>
</span><span id="__span-2-16"><a href="#__codelineno-2-16" id="__codelineno-2-16" name="__codelineno-2-16"></a>    <span class="k">await</span> <span class="n">redis_manager</span><span class="o">.</span><span class="n">set_binary</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">audio_data</span><span class="p">,</span> <span class="n">ttl</span><span class="o">=</span><span class="mi">86400</span><span class="p">)</span>
</span></code></pre></div>
<h3 id="complete-call-lifecycle-flow">Complete Call Lifecycle Flow<a class="headerlink" href="#complete-call-lifecycle-flow" title="Permanent link">¬∂</a></h3>
<div class="mermaid">sequenceDiagram
    participant ACS as Azure Communication Services
    participant Memory as App Memory
    participant CM as ConversationManager
    participant Redis as Redis Cache
    participant AI as AI Service
    participant Cosmos as Cosmos DB

    Note over ACS,Cosmos: Call Initialization
    ACS-&gt;&gt;Memory: CallConnected Event
    Memory-&gt;&gt;CM: new ConversationManager(call_connection_id)
    CM-&gt;&gt;Redis: Initialize session context

    Note over ACS,Cosmos: Active Conversation
    loop Conversation Turns
        ACS-&gt;&gt;Memory: User audio stream
        Memory-&gt;&gt;CM: from_redis() - load state
        CM-&gt;&gt;Redis: Get conversation context &amp; history

        alt TTS Cache Hit
            Redis-&gt;&gt;Memory: Return cached audio
        else Cache Miss
            CM-&gt;&gt;AI: Generate response
            Memory-&gt;&gt;Redis: Cache TTS audio
        end

        CM-&gt;&gt;Redis: persist conversation state
        Memory-&gt;&gt;ACS: Stream audio response
        Memory-&gt;&gt;Cosmos: Queue transcript (async)
    end

    Note over ACS,Cosmos: Call Completion &amp; Archival
    ACS-&gt;&gt;Memory: CallDisconnected Event
    Memory-&gt;&gt;CM: Get final state
    CM-&gt;&gt;Cosmos: Store complete transcript
    CM-&gt;&gt;Cosmos: Update user profile
    Memory-&gt;&gt;Memory: Cleanup call state
</div>
<h3 id="best-practices-configuration">Best Practices &amp; Configuration<a class="headerlink" href="#best-practices-configuration" title="Permanent link">¬∂</a></h3>
<h4 id="key-design-principles">Key Design Principles<a class="headerlink" href="#key-design-principles" title="Permanent link">¬∂</a></h4>
<ul>
<li><strong>Use <code>call_connection_id</code> as session_id</strong> for ACS calls (no random UUIDs)</li>
<li><strong>Batch Redis operations</strong> for performance (pipeline transactions)</li>
<li><strong>Implement graceful degradation</strong> with fallback mechanisms</li>
<li><strong>Monitor TTL expiration</strong> for critical session data</li>
<li><strong>Use async operations</strong> throughout for non-blocking performance</li>
</ul>
<h4 id="monitoring-production-readiness">Monitoring &amp; Production Readiness<a class="headerlink" href="#monitoring-production-readiness" title="Permanent link">¬∂</a></h4>
<h5 id="key-performance-metrics-baselines">Key Performance Metrics &amp; Baselines<a class="headerlink" href="#key-performance-metrics-baselines" title="Permanent link">¬∂</a></h5>
<p><strong>Latency Baselines (Production SLA)</strong>:</p>
<ul>
<li>Redis operations: p99 &lt; 5ms, p95 &lt; 2ms</li>
<li>Memory-to-Redis persistence: &lt; 10ms</li>
<li>Redis-to-Cosmos archival: &lt; 100ms</li>
<li>End-to-end call setup: &lt; 500ms</li>
</ul>
<p><strong>Operational Metrics</strong>:</p>
<ul>
<li>Key creation rate: Monitor spikes (&gt;1000 keys/min indicates issues)</li>
<li>TTL distribution: Alert on keys without TTL (potential memory leaks)</li>
<li>Memory usage: Alert at 70% Redis memory capacity</li>
<li>Connection pool exhaustion: Alert on &gt;80% pool utilization</li>
<li>Failed operations: Alert on &gt;1% error rate per 5-minute window</li>
</ul>
<h5 id="production-alerting-strategy">Production Alerting Strategy<a class="headerlink" href="#production-alerting-strategy" title="Permanent link">¬∂</a></h5>
<table>
<thead>
<tr>
<th>Priority</th>
<th>Alert Type</th>
<th>Trigger Conditions</th>
<th>Response Time</th>
<th>Examples</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>üö® P0 - Critical</strong></td>
<td>Infrastructure Failure</td>
<td>‚Ä¢ Redis unavailability &gt;30s<br/>‚Ä¢ Memory usage &gt;85% (OOM risk)<br/>‚Ä¢ Call setup failures &gt;5% in 2 minutes<br/>‚Ä¢ Security breach detection</td>
<td><strong>Immediate</strong></td>
<td>PagerDuty escalation<br/>On-call engineer response<br/>Auto-failover procedures</td>
</tr>
<tr>
<td><strong>‚ö†Ô∏è P1 - Warning</strong></td>
<td>Performance Degradation</td>
<td>‚Ä¢ Latency p95 &gt;5ms for 10+ minutes<br/>‚Ä¢ TTL policy violations detected<br/>‚Ä¢ Key growth +50% in 1 hour<br/>‚Ä¢ Authentication failure spikes</td>
<td><strong>Next Business Day</strong></td>
<td>Email notifications<br/>Engineering team review<br/>Capacity planning review</td>
</tr>
<tr>
<td><strong>üìä P2 - Informational</strong></td>
<td>Operational Insights</td>
<td>‚Ä¢ Capacity planning metrics<br/>‚Ä¢ Usage pattern analysis<br/>‚Ä¢ Performance trend reports<br/>‚Ä¢ Routine health summaries</td>
<td><strong>Weekly Review</strong></td>
<td>Dashboard reports<br/>Quarterly business reviews<br/>Architecture optimization</td>
</tr>
</tbody>
</table>
<h4 id="alert-configuration-details">Alert Configuration Details<a class="headerlink" href="#alert-configuration-details" title="Permanent link">¬∂</a></h4>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-3-1"><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="c1"># P0 Critical Alert Thresholds</span>
</span><span id="__span-3-2"><a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="nt">redis_availability</span><span class="p">:</span>
</span><span id="__span-3-3"><a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="w">    </span><span class="nt">threshold</span><span class="p">:</span><span class="w"> </span><span class="s">"availability</span><span class="nv"> </span><span class="s">degradation</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">30</span><span class="nv"> </span><span class="s">seconds"</span>
</span><span id="__span-3-4"><a href="#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="w">    </span><span class="nt">escalation</span><span class="p">:</span><span class="w"> </span><span class="s">"page</span><span class="nv"> </span><span class="s">on-call</span><span class="nv"> </span><span class="s">immediately"</span>
</span><span id="__span-3-5"><a href="#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a>
</span><span id="__span-3-6"><a href="#__codelineno-3-6" id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="nt">memory_pressure</span><span class="p">:</span>
</span><span id="__span-3-7"><a href="#__codelineno-3-7" id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="w">    </span><span class="nt">threshold</span><span class="p">:</span><span class="w"> </span><span class="s">"memory_usage</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">85%"</span>
</span><span id="__span-3-8"><a href="#__codelineno-3-8" id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="w">    </span><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="s">"trigger</span><span class="nv"> </span><span class="s">auto-scaling</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">immediate</span><span class="nv"> </span><span class="s">alert"</span>
</span><span id="__span-3-9"><a href="#__codelineno-3-9" id="__codelineno-3-9" name="__codelineno-3-9"></a>
</span><span id="__span-3-10"><a href="#__codelineno-3-10" id="__codelineno-3-10" name="__codelineno-3-10"></a><span class="nt">call_failure_rate</span><span class="p">:</span>
</span><span id="__span-3-11"><a href="#__codelineno-3-11" id="__codelineno-3-11" name="__codelineno-3-11"></a><span class="w">    </span><span class="nt">threshold</span><span class="p">:</span><span class="w"> </span><span class="s">"failed_calls</span><span class="nv"> </span><span class="s">/</span><span class="nv"> </span><span class="s">total_calls</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">0.05</span><span class="nv"> </span><span class="s">over</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">minutes"</span>
</span><span id="__span-3-12"><a href="#__codelineno-3-12" id="__codelineno-3-12" name="__codelineno-3-12"></a><span class="w">    </span><span class="nt">severity</span><span class="p">:</span><span class="w"> </span><span class="s">"business_critical"</span>
</span><span id="__span-3-13"><a href="#__codelineno-3-13" id="__codelineno-3-13" name="__codelineno-3-13"></a>
</span><span id="__span-3-14"><a href="#__codelineno-3-14" id="__codelineno-3-14" name="__codelineno-3-14"></a><span class="c1"># P1 Warning Alert Configuration  </span>
</span><span id="__span-3-15"><a href="#__codelineno-3-15" id="__codelineno-3-15" name="__codelineno-3-15"></a><span class="nt">performance_degradation</span><span class="p">:</span>
</span><span id="__span-3-16"><a href="#__codelineno-3-16" id="__codelineno-3-16" name="__codelineno-3-16"></a><span class="w">    </span><span class="nt">latency_p95</span><span class="p">:</span><span class="w"> </span><span class="s">"&gt;</span><span class="nv"> </span><span class="s">5ms</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">10</span><span class="nv"> </span><span class="s">consecutive</span><span class="nv"> </span><span class="s">minutes"</span>
</span><span id="__span-3-17"><a href="#__codelineno-3-17" id="__codelineno-3-17" name="__codelineno-3-17"></a><span class="w">    </span><span class="nt">ttl_violations</span><span class="p">:</span><span class="w"> </span><span class="s">"keys</span><span class="nv"> </span><span class="s">without</span><span class="nv"> </span><span class="s">TTL</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">100"</span>
</span><span id="__span-3-18"><a href="#__codelineno-3-18" id="__codelineno-3-18" name="__codelineno-3-18"></a><span class="w">    </span><span class="nt">growth_anomaly</span><span class="p">:</span><span class="w"> </span><span class="s">"key_count</span><span class="nv"> </span><span class="s">increase</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">50%</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">1</span><span class="nv"> </span><span class="s">hour"</span>
</span></code></pre></div>
<h5 id="security-compliance-framework">Security &amp; Compliance Framework<a class="headerlink" href="#security-compliance-framework" title="Permanent link">¬∂</a></h5>
<p><strong>Infrastructure Security</strong>:</p>
<ul>
<li><strong>Network</strong>: Private endpoints, VNet integration, no public Redis access</li>
<li><strong>Authentication</strong>: Azure Managed Identity for service-to-service auth</li>
<li><strong>Encryption</strong>: TLS 1.3 in transit, customer-managed keys at rest</li>
<li><strong>Access Control</strong>: RBAC with principle of least privilege</li>
<li><strong>Audit</strong>: All Redis operations logged with correlation IDs</li>
</ul>
<p><strong>Data Protection &amp; PII Handling</strong>:
<div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="c1"># PII Encryption Strategy</span>
</span><span id="__span-4-2"><a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="n">ENCRYPTED_FIELDS</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-4-3"><a href="#__codelineno-4-3" id="__codelineno-4-3" name="__codelineno-4-3"></a>    <span class="s2">"conversation_context"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"user_id"</span><span class="p">,</span> <span class="s2">"phone_number"</span><span class="p">,</span> <span class="s2">"session_metadata"</span><span class="p">],</span>
</span><span id="__span-4-4"><a href="#__codelineno-4-4" id="__codelineno-4-4" name="__codelineno-4-4"></a>    <span class="s2">"call_transcripts"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"transcript"</span><span class="p">,</span> <span class="s2">"participant_info"</span><span class="p">],</span>
</span><span id="__span-4-5"><a href="#__codelineno-4-5" id="__codelineno-4-5" name="__codelineno-4-5"></a>    <span class="s2">"user_profiles"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"personal_data"</span><span class="p">,</span> <span class="s2">"preferences"</span><span class="p">]</span>
</span><span id="__span-4-6"><a href="#__codelineno-4-6" id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="p">}</span>
</span><span id="__span-4-7"><a href="#__codelineno-4-7" id="__codelineno-4-7" name="__codelineno-4-7"></a>
</span><span id="__span-4-8"><a href="#__codelineno-4-8" id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="c1"># Automatic PII Detection &amp; Masking</span>
</span><span id="__span-4-9"><a href="#__codelineno-4-9" id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">store_conversation_context</span><span class="p">(</span><span class="n">context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="__span-4-10"><a href="#__codelineno-4-10" id="__codelineno-4-10" name="__codelineno-4-10"></a>    <span class="n">masked_context</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pii_detector</span><span class="o">.</span><span class="n">mask_sensitive_data</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</span><span id="__span-4-11"><a href="#__codelineno-4-11" id="__codelineno-4-11" name="__codelineno-4-11"></a>    <span class="n">encrypted_context</span> <span class="o">=</span> <span class="k">await</span> <span class="n">crypto_service</span><span class="o">.</span><span class="n">encrypt_fields</span><span class="p">(</span><span class="n">masked_context</span><span class="p">,</span> <span class="n">ENCRYPTED_FIELDS</span><span class="p">)</span>
</span><span id="__span-4-12"><a href="#__codelineno-4-12" id="__codelineno-4-12" name="__codelineno-4-12"></a>    <span class="k">await</span> <span class="n">redis_manager</span><span class="o">.</span><span class="n">set_json</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">encrypted_context</span><span class="p">,</span> <span class="n">ttl</span><span class="o">=</span><span class="n">TTL_POLICIES</span><span class="p">[</span><span class="s2">"conversation_context"</span><span class="p">])</span>
</span></code></pre></div></p>
<p><strong>Compliance Controls</strong>:</p>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Implementation</th>
<th>Monitoring</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Data Retention (GDPR)</strong></td>
<td>Automated TTL enforcement, scheduled purge jobs</td>
<td>Daily retention compliance reports</td>
</tr>
<tr>
<td><strong>Right to Erasure</strong></td>
<td><code>delete_user_data()</code> API with cascade deletion</td>
<td>Audit log of deletion requests</td>
</tr>
<tr>
<td><strong>Data Minimization</strong></td>
<td>PII detection, automatic field masking</td>
<td>Weekly PII exposure scans</td>
</tr>
<tr>
<td><strong>Breach Notification</strong></td>
<td>Real-time security event monitoring</td>
<td>72-hour breach notification workflow</td>
</tr>
</tbody>
</table>
<h5 id="operational-runbooks">Operational Runbooks<a class="headerlink" href="#operational-runbooks" title="Permanent link">¬∂</a></h5>
<p><strong>Incident Response Procedures</strong>:</p>
<ol>
<li>
<p><strong>Redis Performance Degradation</strong>:
   <div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="c1"># Check cluster health</span>
</span><span id="__span-5-2"><a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a>az<span class="w"> </span>redis<span class="w"> </span>show<span class="w"> </span>--resource-group<span class="w"> </span><span class="nv">$RG</span><span class="w"> </span>--name<span class="w"> </span><span class="nv">$REDIS_NAME</span>
</span><span id="__span-5-3"><a href="#__codelineno-5-3" id="__codelineno-5-3" name="__codelineno-5-3"></a>
</span><span id="__span-5-4"><a href="#__codelineno-5-4" id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="c1"># Monitor key distribution</span>
</span><span id="__span-5-5"><a href="#__codelineno-5-5" id="__codelineno-5-5" name="__codelineno-5-5"></a>redis-cli<span class="w"> </span>--scan<span class="w"> </span>--pattern<span class="w"> </span><span class="s2">"rtvoice:prod:*"</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>wc<span class="w"> </span>-l
</span><span id="__span-5-6"><a href="#__codelineno-5-6" id="__codelineno-5-6" name="__codelineno-5-6"></a>
</span><span id="__span-5-7"><a href="#__codelineno-5-7" id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="c1"># Check TTL compliance</span>
</span><span id="__span-5-8"><a href="#__codelineno-5-8" id="__codelineno-5-8" name="__codelineno-5-8"></a>redis-cli<span class="w"> </span><span class="nb">eval</span><span class="w"> </span><span class="s2">"return redis.call('keys', 'rtvoice:prod:*')"</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span>-I<span class="w"> </span><span class="o">{}</span><span class="w"> </span>redis-cli<span class="w"> </span>TTL<span class="w"> </span><span class="o">{}</span>
</span></code></pre></div></p>
</li>
<li>
<p><strong>Security Incident Response</strong>:</p>
<ul>
<li>Immediate: Rotate Redis access keys</li>
<li>Within 1 hour: Audit all active sessions</li>
<li>Within 24 hours: Security assessment report</li>
<li>Within 72 hours: Compliance notification if required</li>
</ul>
</li>
</ol>
<h5 id="capacity-planning">Capacity Planning<a class="headerlink" href="#capacity-planning" title="Permanent link">¬∂</a></h5>
<ul>
<li><strong>Memory</strong>: Scale Redis cluster at 70% utilization</li>
<li><strong>Connections</strong>: Monitor connection pool metrics, scale at 80%</li>
<li><strong>Throughput</strong>: Baseline 10K ops/sec per shard, alert on degradation</li>
</ul>
<h5 id="health-check-implementation">Health Check Implementation<a class="headerlink" href="#health-check-implementation" title="Permanent link">¬∂</a></h5>
<div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">comprehensive_health_check</span><span class="p">():</span>
</span><span id="__span-6-2"><a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="w">    </span><span class="sd">"""Multi-tier health validation for production readiness"""</span>
</span><span id="__span-6-3"><a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a>    <span class="n">health_status</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-6-4"><a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a>        <span class="s2">"redis_connectivity"</span><span class="p">:</span> <span class="k">await</span> <span class="n">test_redis_connection</span><span class="p">(),</span>
</span><span id="__span-6-5"><a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a>        <span class="s2">"memory_usage"</span><span class="p">:</span> <span class="k">await</span> <span class="n">check_redis_memory</span><span class="p">(),</span>
</span><span id="__span-6-6"><a href="#__codelineno-6-6" id="__codelineno-6-6" name="__codelineno-6-6"></a>        <span class="s2">"key_expiration_compliance"</span><span class="p">:</span> <span class="k">await</span> <span class="n">audit_ttl_policies</span><span class="p">(),</span>
</span><span id="__span-6-7"><a href="#__codelineno-6-7" id="__codelineno-6-7" name="__codelineno-6-7"></a>        <span class="s2">"encryption_validation"</span><span class="p">:</span> <span class="k">await</span> <span class="n">verify_pii_encryption</span><span class="p">(),</span>
</span><span id="__span-6-8"><a href="#__codelineno-6-8" id="__codelineno-6-8" name="__codelineno-6-8"></a>        <span class="s2">"performance_baseline"</span><span class="p">:</span> <span class="k">await</span> <span class="n">measure_operation_latency</span><span class="p">(),</span>
</span><span id="__span-6-9"><a href="#__codelineno-6-9" id="__codelineno-6-9" name="__codelineno-6-9"></a>        <span class="s2">"security_posture"</span><span class="p">:</span> <span class="k">await</span> <span class="n">validate_security_controls</span><span class="p">()</span>
</span><span id="__span-6-10"><a href="#__codelineno-6-10" id="__codelineno-6-10" name="__codelineno-6-10"></a>    <span class="p">}</span>
</span><span id="__span-6-11"><a href="#__codelineno-6-11" id="__codelineno-6-11" name="__codelineno-6-11"></a>
</span><span id="__span-6-12"><a href="#__codelineno-6-12" id="__codelineno-6-12" name="__codelineno-6-12"></a>    <span class="c1"># Aggregate health score for load balancer</span>
</span><span id="__span-6-13"><a href="#__codelineno-6-13" id="__codelineno-6-13" name="__codelineno-6-13"></a>    <span class="n">overall_health</span> <span class="o">=</span> <span class="nb">all</span><span class="p">(</span><span class="n">health_status</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</span><span id="__span-6-14"><a href="#__codelineno-6-14" id="__codelineno-6-14" name="__codelineno-6-14"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">"status"</span><span class="p">:</span> <span class="s2">"healthy"</span> <span class="k">if</span> <span class="n">overall_health</span> <span class="k">else</span> <span class="s2">"degraded"</span><span class="p">,</span> <span class="s2">"details"</span><span class="p">:</span> <span class="n">health_status</span><span class="p">}</span>
</span></code></pre></div>
<p><strong>Production Deployment Checklist</strong>:</p>
<ul>
<li>[ ] Redis cluster provisioned with HA configuration</li>
<li>[ ] Private endpoints configured (no public access)</li>
<li>[ ] Monitoring dashboards deployed (Azure Monitor + custom metrics)</li>
<li>[ ] Alert rules configured for all critical thresholds</li>
<li>[ ] Security scanning completed (vulnerability assessment)</li>
<li>[ ] Compliance validation passed (data classification, retention policies)</li>
<li>[ ] Disaster recovery tested (backup/restore procedures)</li>
<li>[ ] Performance load testing completed (10x expected traffic)</li>
<li>[ ] Incident response runbooks validated</li>
</ul>
<hr/>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.highlight", "search.share", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
<script type="module">import mermaid from "https://unpkg.com/mermaid@10.4.0/dist/mermaid.esm.min.mjs";
mermaid.initialize({});</script></body>
</html>