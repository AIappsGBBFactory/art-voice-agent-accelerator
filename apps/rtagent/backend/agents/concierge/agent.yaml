# ═══════════════════════════════════════════════════════════════════════════════
# Erica Concierge Agent - Unified Schema
# ═══════════════════════════════════════════════════════════════════════════════
# Primary banking concierge that orchestrates customer interactions
# Routes to specialist agents when appropriate
# Works with both SpeechCascade and VoiceLive orchestrators
# ═══════════════════════════════════════════════════════════════════════════════

name: Concierge
description: Primary banking assistant - handles most customer needs and routes complex requests to specialists

greeting: "Hi, I'm {{ agent_name | default('Erica') }}, your {{ institution_name | default('Contoso Bank') }} assistant. I'm here to help with your accounts, cards, investments, and more. How can I help you today?"
return_greeting: "Welcome back. What else can I help you with?"

# ─────────────────────────────────────────────────────────────────────────────
# Handoff Configuration
# ─────────────────────────────────────────────────────────────────────────────
handoff:
  trigger: handoff_concierge   # Other agents call this to reach Erica
  strategy: auto                      # Works with both orchestrators
  is_entry_point: true               # This is the default starting agent

# ─────────────────────────────────────────────────────────────────────────────
# Voice Configuration
# ─────────────────────────────────────────────────────────────────────────────
voice:
  name: en-US-EchoTurboMultilingualNeural
  type: azure-standard
  rate: "-4%"

# ─────────────────────────────────────────────────────────────────────────────
# Session Configuration (VoiceLive-specific)
# ─────────────────────────────────────────────────────────────────────────────
session:
  modalities: [TEXT, AUDIO]
  input_audio_format: PCM16
  output_audio_format: PCM16

  input_audio_transcription_settings:
    model: gpt-4o-transcribe
    language: en-US

  turn_detection:
    type: azure_semantic_vad
    threshold: 0.5
    prefix_padding_ms: 240
    silence_duration_ms: 720

  tool_choice: auto

# ─────────────────────────────────────────────────────────────────────────────
# Tools (referenced by name from shared registry)
# ─────────────────────────────────────────────────────────────────────────────
tools:
  # Identity & Profile
  - verify_client_identity
  - send_mfa_code
  - verify_mfa_code
  - resend_mfa_code
  - get_user_profile
  - generate_personalized_greeting
  
  # Account Operations
  - get_account_summary
  - get_recent_transactions
  - refund_fee
  
  # Handoffs to All Specialists
  - handoff_card_recommendation      # Credit card recommendations
  - handoff_investment_advisor       # Investment & retirement
  - handoff_transfer_agency_agent    # Transfer agency / DRIP
  - handoff_fraud_agent              # Fraud investigation
  - handoff_compliance_desk          # Compliance & regulatory
  - handoff_bank_advisor             # Wealth management
  - handoff_to_trading               # Trading desk
  - handoff_to_auth                  # Authentication specialist
  - handoff_general_kb               # General KB - no auth required
  
  # Escalation
  - escalate_human
  - escalate_emergency
  - transfer_call_to_call_center

# ─────────────────────────────────────────────────────────────────────────────
# Prompt (file reference)
# ─────────────────────────────────────────────────────────────────────────────
prompts:
  path: prompt.jinja
