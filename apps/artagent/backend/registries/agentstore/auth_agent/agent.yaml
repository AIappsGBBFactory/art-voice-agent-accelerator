# ═══════════════════════════════════════════════════════════════════════════════
# Auth Agent - Unified Schema
# ═══════════════════════════════════════════════════════════════════════════════
# Authentication and identity verification specialist
# Works with both SpeechCascade and VoiceLive orchestrators
#
# Note: When used with the 'banking' scenario, this agent gets the
# generate_personalized_greeting tool added for high-touch experience.
# ═══════════════════════════════════════════════════════════════════════════════

name: AuthAgent
description: Handles MFA, identity verification, and security questions

greeting: "I need to verify your identity before we continue. Let's get you authenticated."
return_greeting: "Let's continue with verification."

# ─────────────────────────────────────────────────────────────────────────────
# Handoff Configuration
# ─────────────────────────────────────────────────────────────────────────────
handoff:
  trigger: handoff_to_auth            # Other agents call this to reach AuthAgent


# ─────────────────────────────────────────────────────────────────────────────
# Voice Configuration
# ─────────────────────────────────────────────────────────────────────────────
voice:
  name: en-US-ShimmerTurboMultilingualNeural
  type: azure-standard
  rate: "0%"

# ─────────────────────────────────────────────────────────────────────────────
# Session Configuration (VoiceLive-specific)
# ─────────────────────────────────────────────────────────────────────────────
session:
  modalities: [TEXT, AUDIO]
  input_audio_format: PCM16
  output_audio_format: PCM16

  input_audio_transcription_settings:
    model: azure-speech
    language: en-US

  turn_detection:
    type: azure_semantic_vad
    threshold: 0.5
    prefix_padding_ms: 240
    silence_duration_ms: 700

  tool_choice: auto

# ─────────────────────────────────────────────────────────────────────────────
# Tools (referenced by name from shared registry)
# ─────────────────────────────────────────────────────────────────────────────
tools:
  # MFA & Identity Verification
  - verify_client_identity
  - send_mfa_code
  - verify_mfa_code
  - resend_mfa_code
  
  # Handoffs (for tool-based strategy)
  - handoff_concierge              # Return to concierge
  - handoff_fraud_agent            # Transfer to fraud if suspicious
  
  # Escalation
  - escalate_human

template_vars:
  institution_name: "Skynet"
  agent_name: "FriendlyBot"

# ─────────────────────────────────────────────────────────────────────────────
# Prompt (inline for simple agent)
# ─────────────────────────────────────────────────────────────────────────────
prompts:
  path: prompt.jinja