# ═══════════════════════════════════════════════════════════════════════════════
# Card Recommendation Agent - Unified Schema
# ═══════════════════════════════════════════════════════════════════════════════
# Credit card specialist for personalized card recommendations and applications
# Works with both SpeechCascade and VoiceLive orchestrators
# ═══════════════════════════════════════════════════════════════════════════════

name: CardRecommendation
description: Credit card recommendations, comparisons, and e-signature applications

greeting: ""  # Seamless handoff - no greeting needed
return_greeting: "What else would you like to know about cards?"

# ─────────────────────────────────────────────────────────────────────────────
# Handoff Configuration
# ─────────────────────────────────────────────────────────────────────────────
handoff:
  trigger: handoff_card_recommendation
  transition_message: "Let me find the best card options for you."

# ─────────────────────────────────────────────────────────────────────────────
# Voice Configuration
# ─────────────────────────────────────────────────────────────────────────────
voice:
  name: en-US-EchoTurboMultilingualNeural
  type: azure-standard
  rate: "-4%"

# ─────────────────────────────────────────────────────────────────────────────
# Model Configuration (LLM for agent reasoning)
# ─────────────────────────────────────────────────────────────────────────────
model:
  deployment_id: gpt-4o                   # Used by both modes
  temperature: 0.7
  top_p: 0.9
  max_tokens: 150

# Uncomment to use DIFFERENT models per mode:
# voicelive_model:
#   deployment_id: gpt-4o-realtime-preview
#   temperature: 0.7
#
# cascade_model:
#   deployment_id: gpt-4o-mini
#   temperature: 0.8

# ─────────────────────────────────────────────────────────────────────────────
# Session Configuration (VoiceLive Mode Only)
# ─────────────────────────────────────────────────────────────────────────────
session:
  modalities: [TEXT, AUDIO]
  input_audio_format: PCM16
  output_audio_format: PCM16

  input_audio_transcription_settings:
    model: gpt-4o-transcribe
    language: en-US

  turn_detection:
    type: azure_semantic_vad
    threshold: 0.5
    prefix_padding_ms: 240
    silence_duration_ms: 720

  tool_choice: auto

# ─────────────────────────────────────────────────────────────────────────────
# Speech Configuration (Cascade Mode Only)
# ─────────────────────────────────────────────────────────────────────────────
speech:
  recognition:
    language: en-US
  synthesis:
    voice_name: en-US-EchoTurboMultilingualNeural
  vad:
    threshold: 0.02
    silence_duration_ms: 700
    prefix_padding_ms: 200

# ─────────────────────────────────────────────────────────────────────────────
# Tools (referenced by name from shared registry)
# ─────────────────────────────────────────────────────────────────────────────
tools:
  # Card Search & Details
  - search_card_products
  - get_card_details
  
  # Application Flow
  - send_card_agreement
  - verify_esignature
  - finalize_card_application
  
  # MFA (if needed)
  - send_mfa_code
  - verify_mfa_code
  
  # Handoffs (tool-based strategy)
  - handoff_investment_advisor        # If topic shifts to retirement
  - handoff_concierge           # Return to main concierge
  
  # Escalation
  - escalate_human
  - escalate_emergency

# ─────────────────────────────────────────────────────────────────────────────
# Prompt (file reference)
# ─────────────────────────────────────────────────────────────────────────────
prompts:
  path: prompt.jinja
